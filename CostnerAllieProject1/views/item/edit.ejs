<%- include('../partials/header') %>

<div class="edit-page-content">
    <form method="POST" action="/items/<%= item.id %>?_method=PUT" class="edit-form-container" enctype="multipart/form-data">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" value="<%= item.title %>" required>
        
        <label for="condition">Condition</label>
        <select id="condition" name="condition" required>
            <option value="New" <%= item.condition === 'New' ? 'selected' : '' %>>New</option>
            <option value="Like New" <%= item.condition === 'Like New' ? 'selected' : '' %>>Like New</option>
            <option value="Good" <%= item.condition === 'Good' ? 'selected' : '' %>>Good</option>
            <option value="Fair" <%= item.condition === 'Fair' ? 'selected' : '' %>>Fair</option>
            <option value="Poor" <%= item.condition === 'Poor' ? 'selected' : '' %>>Poor</option>
        </select>

        <label for="price">Price ($)</label>
        <input type="number" id="price" name="price" value="<%= item.price %>" min="0.01" step="0.01" required>

        <label for="details">Details</label>
        <textarea rows="5" id="details" name="details" class="fixed-width" required><%= item.details %></textarea>

        <label for="image">Upload Image</label>
        <input type="file" id="image" name="image" accept="image/*">

        <!-- Show the current image if it exists -->
        <% if (item.image) { %>
            <p>Current Image: <img src="/<%= item.image %>" alt="Current Image" /></p>
        <% } else { %>
            <p>No image available</p> <!-- Fallback message if no image exists -->
        <% } %>

        <input type="submit" value="Update Item">
    </form>

    <!-- Delete Button Form -->
    <form action="/items/<%= item.id %>?_method=DELETE" method="POST" class="delete-form-container">
        <button type="submit" class="delete-button-edit">Delete Item</button>
    </form>
</div>

<%- include('../partials/footer') %>